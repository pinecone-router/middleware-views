(()=>{function d(n,i=window.PineconeRouter.settings.viewSelector??"#app"){document.querySelector(i).innerHTML=n,document.querySelector("[autofocus]")?.focus()}var c={version:"3.0.3",name:"views",onAfterRouteProcessed(n,i){if(!n.hasAttribute("x-view"))return;let o=n.getAttribute("x-view");!(o.startsWith("[")&&o.endsWith("]"))&&!(o.startsWith("Array(")&&o.endsWith(")"))&&(o=`["${o}"]`);let r=new Function("return "+o)();if(i=="notfound"){window.PineconeRouter.notfound.view=r;return}let e=window.PineconeRouter.routes.findIndex(t=>t.path==i);window.PineconeRouter.routes[e].view=r},onBeforeHandlersExecuted(n,i,o){window.dispatchEvent(window.PineconeRouter.loadStart)},onHandlersExecuted(n,i,o){let r=n?n.view?n.view:"":window.PineconeRouter.notfound.view;if(!r){window.dispatchEvent(window.PineconeRouter.loadEnd);return}Promise.all(r.map(async e=>{let t="";if(typeof e=="string")t=e;else if(typeof e=="object"&&e&&e.path)t=e.path;else return;let a=await(await fetch(t)).text();return{selector:e.selector,content:a}})).then(e=>{e.forEach(t=>{t!==void 0&&(t.selector?d(t.content,t.selector):d(t.content))})}).catch(e=>{let t=document.querySelector(window.PineconeRouter.settings.viewSelector??"#app");t&&t.dispatchEvent(new CustomEvent("fetch-error",{detail:e})),console.error(`Pinecone Router: Fetch Error: ${e}`)}).finally(()=>{window.dispatchEvent(window.PineconeRouter.loadEnd)})}};window.PineconeRouterMiddlewares==null?window.PineconeRouterMiddlewares=[c]:window.PineconeRouterMiddlewares.push(c);})();
//# sourceMappingURL=views.min.js.map
